language: java
sudo: required
dist: trusty
jdk: oraclejdk9
services:
- docker
env:
  global:
  - REGISTRY_USER=travisinnov
  - secure: FRSTVp9p55aPMtpnAZrlotB+LTC68fXtSv2Bzbt76BZo+YRlvDQy66GOzLse4+rjFOkmSY5FHOZAzba5x6u1XkrejUM+jlqKBNKcFWyP1J5uW44Z4K/9Krzg3Zj60Sld52OEKa2RJd3TblMy4ZxLG7ezAqMNb20wq8lU5Zpc1wmseVvtqKRnJrxDcLPefqicogwFdei+dqepkwgZvQrKIYrvIPnKFdBr+BUw6+54QuLgUuG+7ErE7XotxbGg3y5nUNZ0vo96SGvTf9SHFIPvdA6XluBWMCsx9mth9A3rioTL1qyqiRpvRaCCJWdb5l1gBasHhZGOyYTxqavOXo3QMivcIwu7AJslpS/Kpa24zGNb94IoIIT2QTuUtVRIx47km90FV+GLCTxXaMK99pVQu4pFSkoVICOckRsz5/L/JDT00PfV0EC3iwibl2Rw9AIl3ecfmir9OybR4D+jr7N2qvdShC7KWFLsqfXIqNxNI+rvythagvpdXqo4BOhiIaUNIN4G/SvwxLTvQp57jjeQyAOhFvgZEa9Lj5HF2QpjpOGlH5OdLO7mEZYBEV//u9uxyUdhPvr1x0QuItWyo30ONsehbCQyW5VsQmsckfICLYCNZ4oY8mziO4HVtwu6jDlLsVsqDA+ubILpOTBgXz83didad7pX+5qlwWA9JrcKvBE=
before_script:
- docker pull yfalco/pns-innov-back || true
script:
- "./mvnw clean install -B"
- docker build --pull --cache-from yfalco/pns-innov-back --tag yfalco/pns-innov-back .
- docker images
before_deploy:
- docker login -u "$REGISTRY_USER" -p "$REGISTRY_PASS"
deploy:
  provider: script
  script: docker push yfalco/pns-innov-back
before_install:
- chmod +x mvnw
